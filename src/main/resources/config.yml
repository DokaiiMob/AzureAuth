# ================================================
# AzureAuth - Конфигурация плагина авторизации
# Разработано для сервера AzureMyst
# ================================================

# Настройки базы данных
database:
  # Тип базы данных: SQLITE или MYSQL
  type: SQLITE
  
  # Префикс таблиц в базе данных
  table-prefix: "azureauth_"
  
  # Настройки MySQL (используются только при type: MYSQL)
  mysql:
    host: "localhost"
    port: 3306
    database: "azureauth"
    username: "root"
    password: "password"
    
    # Параметры подключения
    connection-properties:
      useSSL: false
      useUnicode: true
      characterEncoding: "UTF-8"
      autoReconnect: true
      maxReconnects: 3

# Основные настройки авторизации
auth:
  # Включить регистрацию новых игроков
  registration-enabled: true
  
  # Минимальная длина пароля
  min-password-length: 6
  
  # Максимальная длина пароля
  max-password-length: 32
  
  # Время на авторизацию (в секундах)
  login-timeout: 60
  
  # Максимальное количество попыток входа
  max-login-attempts: 3
  
  # Настройки сессий
  sessions:
    # Включить систему сессий (запоминание IP)
    enabled: true
    
    # Длительность сессии в секундах (3600 = 1 час)
    duration: 3600
    
    # Автоматически создавать сессию при входе
    auto-create: true
  
  # Настройки капчи
  captcha:
    # Включить капчу после неудачных попыток
    enabled: true
    
    # Показывать капчу после N неудачных попыток
    after-attempts: 2
    
    # Длина кода капчи
    code-length: 6

# Настройки безопасности
security:
  # Принуждать к использованию сложных паролей
  force-secure-password: true
  
  # Белый список IP-адресов
  ip-whitelist:
    enabled: false
    # Список разрешенных IP (если enabled: true)
    allowed-ips:
      - "127.0.0.1"
      - "192.168.1.0/24"
  
  # Проверка email (требует дополнительной настройки)
  email-verification:
    enabled: false
    
  # Время блокировки после превышения лимита попыток (в секундах)
  brute-force-protection-time: 300
  
  # Проверка на бот-активность
  anti-bot:
    enabled: true
    # Минимальное время между попытками входа (мс)
    min-login-interval: 1000

# Ограничения для неавторизованных игроков
restrictions:
  # Блокировать чат
  block-chat: true
  
  # Блокировать движение
  block-movement: true
  
  # Блокировать команды (кроме /login, /register)
  block-commands: true
  
  # Блокировать взаимодействие с инвентарем
  block-inventory: true
  
  # Блокировать взаимодействие с блоками
  block-interactions: true
  
  # Блокировать получение урона
  block-damage: false
  
  # Разрешенные команды для неавторизованных игроков
  allowed-commands:
    - "login"
    - "l"
    - "войти"
    - "register"
    - "reg"
    - "регистрация"
    - "help"
    - "?"

# Настройки уведомлений
notifications:
  # Полоса босса (Boss Bar)
  bossbar:
    enabled: true
    color: "RED"
    style: "PROGRESS"
    
  # Строка действий (Action Bar)
  actionbar:
    enabled: true
    update-interval: 20 # тики (20 тиков = 1 секунда)
    
  # Заголовки (Title)
  title:
    enabled: true
    fade-in: 10
    stay: 70
    fade-out: 20
    
  # Звуковые эффекты
  sound:
    enabled: true
    success: "ENTITY_PLAYER_LEVELUP"
    error: "ENTITY_VILLAGER_NO"
    warning: "BLOCK_NOTE_BLOCK_PLING"

# Настройки сообщений
messages:
  # Язык по умолчанию
  language: "ru"
  
  # Префикс сообщений
  prefix: "&6[&bAzure&3Auth&6]"
  
  # Показывать префикс в сообщениях
  show-prefix: true

# Настройки логирования
logging:
  # Включить логирование
  enabled: true
  
  # Логировать в файл
  log-to-file: true
  
  # Логировать в консоль
  log-to-console: true
  
  # Логировать попытки входа
  log-login-attempts: true
  
  # Логировать регистрации
  log-registrations: true
  
  # Логировать смену паролей
  log-password-changes: true
  
  # Логировать подозрительную активность
  log-suspicious-activity: true

# Интеграции с другими плагинами
integrations:
  # PlaceholderAPI
  placeholderapi:
    enabled: true
    
  # LuckPerms
  luckperms:
    enabled: true
    # Автоматически выдавать группу после регистрации
    auto-assign-group: "obychnyy-zhitel"
    
  # Vault (для экономики)
  vault:
    enabled: true
    # Стоимость регистрации (0 = бесплатно)
    registration-cost: 0.0

# Настройки производительности
performance:
  # Использовать асинхронные операции с БД
  async-database: true
  
  # Кэширование данных авторизации
  cache:
    enabled: true
    # Размер кэша
    size: 1000
    # Время жизни записи в кэше (секунды)
    expire-after: 300
    
  # Автоматическая очистка устаревших данных
  cleanup:
    enabled: true
    # Интервал очистки (секунды)
    interval: 3600
    # Удалять сессии старше N дней
    max-session-age-days: 30

# Дополнительные настройки
advanced:
  # Использовать UUID или имя для идентификации
  use-uuid: true
  
  # Принуждать к смене ника при первом входе
  force-name-change: false
  
  # Максимальное количество аккаунтов с одного IP
  max-accounts-per-ip: 3
  
  # Проверять версию клиента
  version-check:
    enabled: false
    min-version: "1.20.0"
    max-version: "1.21.4"

# Режим отладки (не рекомендуется на продакшене)
debug:
  enabled: false
  log-queries: false
  log-cache-operations: false
